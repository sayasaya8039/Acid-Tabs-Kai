# Acid Tabs改

タブを自動でグループ化する魔法のChrome拡張機能

## 機能

### 自動タブグループ化
- URLパターンに基づいてタブを自動的にグループ化
- カスタムルールでグループ名と色を設定可能
- ワイルドカード (`*`) を使った柔軟なパターンマッチング

### タブ順序の記憶・復元 (v7.0.0 改善)
- ブラウザを閉じる際にタブの並び順を自動保存
- グループ内・グループ外のタブ順序を正確に記憶
- ブラウザ再起動時にタブを再読み込みしてから順序を復元
- Chromeの内部処理との競合を解消し、より確実に復元
- グループの折りたたみ状態も復元

### BULK EDIT機能
- 複数のルールを一括で編集
- テキスト形式でルールをインポート/エクスポート

### キーボードショートカット
- `Alt+Shift+C`: 全グループの折りたたみ切り替え

## インストール

### Chrome Web Store
(準備中)

### 手動インストール
1. このリポジトリをダウンロードまたはクローン
2. Chromeで `chrome://extensions/` を開く
3. 「デベロッパーモード」を有効化
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. ダウンロードしたフォルダを選択

### CRXファイルからインストール
1. `Acid-Tabs-Chrome-ウェブストア.crx` ファイルをダウンロード
2. Chromeで `chrome://extensions/` を開く
3. CRXファイルをドラッグ&ドロップ

## 使い方

### ルールの設定
1. 拡張機能アイコンをクリック
2. 「+」ボタンで新しいルールを追加
3. グループ名、URLパターン、色を設定
4. 「SAVE」で保存

### URLパターンの例
```
*github.com*          # GitHubのすべてのページ
*youtube.com/watch*   # YouTube動画ページ
*docs.google.com*     # Google Docs
*.amazon.co.jp*       # Amazon Japan
```

### BULK EDITの使い方
複数のルールを一括で設定できます。

**フォーマット（1行1ルール）：**
```
グループ名, パターン1   パターン2   パターン3, 色
```

- 各項目はカンマ (`,`) で区切る
- 複数パターンは3つのスペース (`   `) で区切る
- 色は省略可能（省略時はランダム）

**使用可能な色：**
`grey`, `yellow`, `blue`, `red`, `green`, `purple`, `cyan`, `pink`, `orange`

**例：**
```
開発, *github.com*   *stackoverflow.com*, blue
SNS, *twitter.com*   *facebook.com*, cyan
動画, *youtube.com*   *netflix.com*, red
ショッピング, *amazon.co.jp*   *rakuten.co.jp*, green
```

**注意事項：**
- BULK EDIT には文字数制限があります（約1500文字程度）
- 制限を超えるとCONFIRMボタンが押せなくなります
- 多数のパターンを追加する場合は、BULK EDITで基本設定後、個別に追加してください

## バージョン履歴

### v7.1.1
- ブラウザ再起動時の再リロード機能を改善
  - `chrome.storage.session` を活用したより確実な起動検出を導入
  - `onStartup` イベントが発火しない場合でも、ブラウザセッション開始を正確に検知
  - タイムスタンプベースの判定ロジックを最適化 (判定間隔を1分に短縮)
  - タブリロード時の安定性を向上
- バージョン不整合の修正

### v7.1.0
- バージョンアップ

### v7.0.0
- 元のAcid Tabsコードを完全に復元
  - 元のグループ化機能が正常に動作
  - タブ順序管理機能は末尾に追加（元のコードは変更なし）
- タブ順序管理機能 v3.0
  - シンプルで信頼性の高い実装に書き直し

### v6.9.7
- グループ復元ロジックを完全に再構築
  - タイトルではなくgroupIdベースでタブをグループ化
  - タイトルが空のグループも正しく復元
  - 同名グループがある場合も正しく復元

### v6.9.6
- P関数（パターンマッチング）のnullチェック追加
  - ルール配列がnull/undefinedの場合のエラーを防止
  - 「Invalid attempt to iterate non-iterable instance」エラーを解消

### v6.9.5
- タブ順序の保存タイミングを改善
  - 保存遅延を500ms→100msに短縮
  - 定期保存を5分→30秒に変更
  - アイドル状態検出時に保存
  - サービスワーカー停止前に保存
  - ブラウザを閉じる際の保存漏れを防止

### v6.9.4
- 元のAcid Tabsコードのエラーを根本から修正
  - chrome.tabs.get()のnullチェック追加
  - chrome.tabGroups.get()のエラーハンドリング追加
  - 存在しないタブ/グループのエラーを完全に解消

### v6.9.3
- グローバルエラーハンドラーを追加
  - unhandledrejectionイベントでエラーを抑制

### v6.9.2
- Chrome APIラッパーでエラーを完全に抑制
  - 元のAcid Tabsコードのエラーも抑制
  - 存在しないタブ/グループへの操作を安全にスキップ
  - コンソールエラーが出なくなりました

### v6.9.1
- タブ復元のエラーハンドリングを強化
  - URLベースのマッチングに完全移行（タブIDに依存しない）
  - 存在しないタブへの操作を安全にスキップ
  - ブラウザ再起動後の安定性を大幅に向上

### v6.9.0
- タブ順序復元を完全再構築方式に変更
  - 起動時に全グループを一度解除してから再構築
  - 元のAcid Tabs処理との競合を完全に解消
  - グループの順序を正確に復元

### v6.8.0
- ブラウザ再起動時のタブ順序復元を改善
  - 起動時にすべてのタブを再読み込みしてから順序を復元
  - Chromeの内部タブ復元処理との競合を解消
  - より確実にグループ順序が復元されるように改善

### v6.7.1
- BULK EDIT機能のバグ修正
  - パターンが未定義の場合のTypeError修正
  - null/undefined チェックの追加
- README.mdにBULK EDITの正しいフォーマットを記載

### v6.7.0
- タブ順序の保存・復元機能を大幅改善
- グループ情報（名前、色、折りたたみ状態）の完全保存
- 定期的な自動保存機能追加

### v6.6.0
- タブ順序記憶機能を追加
- 日本語ローカライズ

### v6.5.9
- オリジナル版

## 技術仕様

- Manifest V3
- Chrome Storage API (local/sync)
- Chrome Tabs API
- Chrome Tab Groups API

## ライセンス

MIT License

## クレジット

オリジナル: [Acid Tabs](https://chrome.google.com/webstore/detail/acid-tabs)
改良版: Acid Tabs改
